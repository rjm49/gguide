<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Grammar Guide</title>
<link rel="stylesheet" href="./bootstrap-3.3.7-dist/css/bootstrap.css">
<link rel="stylesheet" href="./bootstrap-3.3.7-dist/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="extra.css">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	    <![endif]-->
</head>
<body>
	<div class="container">
		<span data-bind="visible: phase()=='pretest'"><label>Author ID:</label><input data-bind="value: author_id"></input> <label>Track:</label><select data-bind="options: tracks, value: track"></select> <label>Concept:</label><select data-bind="options: concepts"></select></span>
		<button data-bind="click: resetPhase">Reset</button>
		
		<p><span data-bind="text: author_id"></span> / <span data-bind="text: track"></span> / <span data-bind="text: phase"></span></p>
	</div>
	
	<div id="questionnaire" class="container" data-bind="with: questions, visible: app.phase()!='homework'">
		
		<H1>Grammar Guide</H1>
		<p>Welcome to the Grammar Guide, and thanks for helping us test this very early version!</p>
		<p>When you write your answers, we send them to our clever elves, who check your English. The elves will then give you feedback and recommend exercises to help you improve your score, and you can try again!</p>

		<div class="row row-centered">
			<div class="col-md-6 col-centered center-block">
				<h2>Questions (approx 20min)</h2>
				<p>Please fill the gaps to put the following sentences into the "simple past" tense.</p>
				<hr>
				<ul data-bind="foreach: allItems">
					<li>
						<div class="view">

							<div data-bind="visible: score()==null">
							<p><span data-bind="text: initial().split('$')[0]"></span>_____<span data-bind="text: initial().split('$')[1]"></span> <span data-bind="text: hint"></span></p>
							<p><input class="exercise-input" type="text" data-bind="value: attempt" placeholder="your guess here.."></input></p>
							</div>

							<div data-bind="visible: score()!=null">
								<label data-bind="style: {backgroundColor: (isPass() ? 'hsl(120,80%,80%)' : 'hsl(30,80%,80%)' ) }, text: buildAnswer()"></label> | <label data-bind="text: isPass() ? 'OK!' : 'Oops..' "></label>
<!-- 								<p><span data-bind="text: score"></span>/<span data-bind="text: target"></span></p> -->
							</div>

							<hr>
						</div>
					</li>

				</ul>
				
			</div>
		</div>
	</div>
	
	<div id="homework" class="container" data-bind="with: homework, visible: app.phase()=='homework'">
		<div class="row row-centered" data-bind="visible: $root.track()=='B'">
			<H2>Thanks!</H2>
			<p>We appreciate your answers - they really help us! Please take a short break, and think about the exercises you just did.</p>
			<p>
				After <strong>20 minutes</strong>, please continue to the next set of questions.
			</p>
		</div>

		<div class="row row-centered" data-bind="visible: $root.track()!='B'">
			<div class="col-md-6 col-centered center-block">
				<ul data-bind="foreach: allItems">
					<li>
						<div data-bind="html: html"></div>
						<hr>
					</li>
				</ul>
			</div>
		</div>
	</div>

	<div id="buttons" class="container">
		<p>
			<button data-bind="click: nextPhase, visible: phase()!='finished' " type="button" class="btn btn-primary center-block">Next</button>
		</p>
		<p data-bind="text: phase"></p>		
	</div>

	<div class="overlay" data-bind="style: { height: net_waiting() ==true ? '100%' : '0' }">
		<div class="overlay-content">
			Fetching answers!
			<br>
			<img src="./pugrun.gif">
		</div>
	</div>

	<!--   <script src="../json2.js"></script> -->
	<script src="jquery.js"></script>
	<script src="./bootstrap-3.3.7-dist/js/bootstrap.js"></script>
	<script src="knockout-3.4.0.js"></script>
	<script src="models.js"></script>
	<script src="logger.js"></script>
	<script src="rpc.js"></script>
	<script src="gg.js"></script>

</body>
</html>